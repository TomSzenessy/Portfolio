---
import LiteYouTube from './LiteYouTube.astro';
import Icon from './Icon.astro';

interface Props {
  t: (key: string) => string;
}

const { t } = Astro.props;

const projects = [
  {
    id: 'mino',
    youtubeId: 'b2APx-m-Ch4',
    uploadDate: '2024-12-08',
    kicker: t('mino_kicker'),
    title: t('mino_title'),
    desc: t('mino_desc'),
    quote: t('quote_chatgpt'),
    delay: 0
  },
  {
    id: 'vr',
    youtubeId: 'UdyzG_m69-g',
    uploadDate: '2024-12-14',
    kicker: t('vr_kicker'),
    title: t('vr_title'),
    desc: t('vr_desc'),
    delay: 100
  },
  {
    id: 'ai_id',
    youtubeId: 'bspxhyMI6RE',
    uploadDate: '2025-05-18',
    kicker: t('ai_id_kicker'),
    title: t('ai_id_title'),
    desc: t('ai_id_desc'),
    delay: 0
  },
  {
    id: 'comm',
    youtubeId: 'rNhRs4DzHv4',
    uploadDate: '2024-12-17',
    kicker: t('comm_kicker'),
    title: t('comm_title'),
    desc: t('comm_desc'),
    quote: t('quote_coding_hours'),
    delay: 100
  }
];

// Generate JSON-LD structured data for all videos
const videoStructuredData = projects.map(p => ({
  "@type": "VideoObject",
  "name": p.title,
  "description": p.desc,
  "thumbnailUrl": `https://i.ytimg.com/vi/${p.youtubeId}/mqdefault.jpg`,
  "uploadDate": p.uploadDate,
  "contentUrl": `https://www.youtube.com/watch?v=${p.youtubeId}`,
  "embedUrl": `https://www.youtube.com/embed/${p.youtubeId}`
}));
---

<section id="projects" class="py-20">
    <div class="text-center mb-16 reveal-item">
        <p class="text-accent font-bold tracking-widest uppercase text-xs mb-3">
            {t('projects_kicker')}
        </p>
        <h2 class="font-heading text-4xl md:text-5xl text-text-main mb-4">
            {t('projects_title')}
        </h2>
        <p class="text-text-muted text-lg max-w-2xl mx-auto">
            {t('projects_subtitle')}
        </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
        {projects.map(p => (
            <div class="bg-card-bg rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 reveal-item group" style={`transition-delay: ${p.delay}ms`}>
                <div class="aspect-video relative overflow-hidden">
                    <LiteYouTube videoId={p.youtubeId} title={p.title} />
                </div>
                <div class="p-8">
                    <p class="text-xs font-bold text-accent uppercase tracking-wider mb-2">
                        {p.kicker}
                    </p>
                    <h3 class="font-heading text-2xl text-text-main mb-3 group-hover:text-accent transition-colors">
                        {p.title}
                    </h3>
                    <p class="text-text-muted mb-4">
                        {p.desc}
                    </p>
                    <a href={`https://youtu.be/${p.youtubeId}`} target="_blank" class="inline-flex items-center text-accent font-semibold hover:underline decoration-2 underline-offset-4">
                        <span>{t('video_watch')}</span>
                        <Icon name="arrow-right" class="ml-2 text-sm transition-transform group-hover:translate-x-1" />
                    </a>

                    {p.quote && (
                        <div class="mt-4 text-[10px] text-text-muted/30 italic hover:text-accent hover:opacity-100 transition-all cursor-default select-none">
                            {p.quote}
                        </div>
                    )}
                </div>
            </div>
        ))}
    </div>
</section>

<!-- Video Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@graph": videoStructuredData
})} />
